<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>
    <div class="mb-5"
        style="padding:40px; background-image: url(img/heading-section-Page-Template-for-food-offer.jpg);">
        <div style="float: left;width: 50%;">
            <h1 style="font-size: 50px; color: aliceblue;" align="center">Kathiyavadi Hotel</h1>
        </div>
        <div style="padding-left: 80%;margin-top: 12px;">
            <button onclick="cart()" style="padding: 10px 20px;" class="btn btn-danger">Cart</button>
        </div>
        <div style="clear: both;"></div>
    </div>

    <div class="conatiner" style="margin-left: 10%;align-items: center;">
        <div class="row" id="record">

        </div>
    </div>

    <script type="text/javascript">

        let data = [
            {
                productid: 1,
                name: "Gujarati Thali",
                qty: 1,
                Price: 200,
                image: "img/pexels-abhiram-kodape-7804406.jpg"
            },
            {
                productid: 2,
                name: "Dhokla",
                qty: 1,
                Price: 100,
                image: "img/images.jpeg"
            },
            {
                productid: 3,
                name: "Fafda",
                qty: 1,
                Price: 250,
                image: "img/fafda-jalebi.jpg"
            },
            {
                productid: 4,
                name: "Sweet",
                qty: 1,
                Price: 150,
                image: "img/Thabadi-Peda-2-683x1024.jpg"
            },
            {
                productid: 5,
                name: "Rabdi",
                qty: 1,
                Price: 200,
                image: "img/angoori-rabdi-indrani-cup.jpg"
            },
            {
                productid: 6,
                name: "Lassi",
                qty: 1,
                Price: 70,
                image: "img/Sweet-lassi.jpg"
            }

        ];

        const viewData = () => {

            localStorage.setItem('product', JSON.stringify(data));
            tbl = "";
            data.map((val, i) => {
                tbl +=
                    `
                <div class="col-lg-4 mb-5">
                    <div class="card" style="width:400px">
                        <img class="card-img-top" src="${val.image}" alt="Card image" style="width:100%">
                        <div class="card-body" style="width:200px">
                            <h4 class="card-title">Item :- ${val.name}</h4>
                            <h5 class="card-title">Price :- ${val.Price}</h5>
                            <p class="card-text">${val.qty}</p>
                            <button type="button" onclick="order(${val.productid})"  class="btn btn-primary">Order</button>
                        </div>
                        </div>
                    </div>
                </div>

                `
            })
            document.getElementById('record').innerHTML = tbl;
        }
        viewData();

        const order = (pid) => {
            console.log(pid);
            let cart = [];

            let allproduct = JSON.parse(localStorage.getItem('product'));

            allproduct.map((val) => {
                if (val.productid == pid) {
                    let obj = {
                        productid: val.productid,
                        productname: val.name,
                        qty: val.qty,
                        price: val.Price,
                        image: val.image
                    }

                    if (localStorage.getItem('cart') === null || localStorage.getItem('cart') === undefined) {
                        cart.push(obj)
                        localStorage.setItem('cart', JSON.stringify(cart));
                    }
                    else {
                        let val = JSON.parse(localStorage.getItem('cart'));
                        val.push(obj);
                        localStorage.setItem('cart', JSON.stringify(val));
                    }
                }
            })
            alert("order successfully")


        }

        const cart = () => {
            window.location.href = "cart.html";
        }
    </script>
</body>

</html>